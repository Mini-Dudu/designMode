# 组合模式

### 学校院系展示需求

* 编写程序展示一个学校的院系结构: 

  * 需求, 要在一个页面中展示出学校的院系组成, 一个学校有多少个院系, 一个学院有多少个系.

  * 如图

    ![](..\_img\院系展示需求.png)

* 传统方式

  * 采用 系(专业) **继承** 院系, 学院 **继承** 学校.



### 传统方式解决存在的问题分析

1. 将学院看作是学校的子类, 系是学院的子类, 这样实际上是按照组织大小的方式来进行分层次的.
2. 实际上我们的要求是: 在一个页面中展示出学校院系组成, 一个学校有多个学院, 一个学院有多个系, 因此这种方案, 不能很好地实现 **管理操作** 比如对学院、系的添加, 删除、遍历等操作.
3. 解决方案: 把学校、学院、系都看作是内部组织机构， 他们之间没有继承的关系， 而是一个树形结构， 可以更好的实现管理操作.即 ==> 组合模式



### 基本介绍

* 组合模式属于结构型设计模式.


* 组合模式又叫部分整体模式, 它创建了对象组的树形结构, 将对象组合成树壮结构以表示 "整体部分" 的层次关系.
* 组合模式依据树形结构来组合对象, 用来表示部分以及整体层次.
* 组合模式使得用户对单个对象和这对象的访问具有一致性, 即: 组合能让客户以一致的处理个别对象以及组合对象.



### 原理类图:

* ![](..\_img\组合模式原理类图.png) 
  * 说明:
    1. Component : 是组合中对象声明接口, 在适当情况下,实现所有类共有的接口默认行为, 用于访问和管理 Component 子类部件, Component 可以是接口或者抽象类.
    2. Leaf : 在组合中表示叶子节点, 叶子节点没有子节点
    3. Composite : 非叶子节点, 用于存储子部件, 在 Component  接口中实现子部件的相关操作. 比如增加、删除…等
* 解决的问题
  * 当我们要处理的对象可以生成一棵树形结构， 而我们要对树上的节点和叶子节点进行操作时， 它能够提供一致的方式， 而不用考虑它是子节点还是叶子节点。



### JDK中的组合模式

* Java的集合类--- HashMap 就使用到了组合模式