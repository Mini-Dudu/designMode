# 中介者模式



### 问题引出

#### 智能家庭管理问题

* 智能家庭项目
  1. 智能家庭包括各种设备, 闹钟、咖啡机、电视机、窗帘等
  2. 主人要看电视时， 各个设备可以协同工作， 自动完成看电视的准备工作， 比如闹钟响起->咖啡机开始做咖啡->窗帘自动落下->电视机开始播放.



#### 问题分析

1. 当各个电器对象有多种状态改变时, 相互之间的调用关系会比较复杂
2. 各个电器对象彼此联系, 你中有我, 我中有你, 不利于松耦合
3. 各个电器对象之间传递的消息(参数), 容易混乱
4. 当系统增加一个新的电器对象时, 或者执行的流程改变时, 代码的可维护性、扩展性都不理想.
5. 解决方式: 采用中介者模式



### 基本介绍

* 中介者模式, 用一个中介对象来封装一系列的对象交互. 中介者使各个对象不需要显示地相互引用, 从而使其耦合松散, 而且可以独立地改变它们之间的交互.
* 中介者模式属于行为模式, 使代码易于维护
* 比如 MVC 模式, C (controller控制器) 是 M (model模型) 和 V (view视图) 的中介者, 在前后端交互时起到了中间人的作用.



### 注意事项及细节

1. 多个类相互耦合, 会形成网状结构, 使用中介者模式将网状结构分离为星型结构, 进行解耦.
2. 减少类之间的依赖, 降低了耦合, 符合迪米特法则
3. 中介者承担了较多的责任, 一旦中介者出现了问题, 整个系统就会收到影响
4. 如果设计不当, 中介者对象本身变得过于复杂, 这一点在实际应用上, 要特别注意.







